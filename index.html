<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SandCraft Wiki - Le Wiki officiel</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/minecraft-logo.png">
    
    <!-- Metadata -->
    <meta name="description" content="Le Wiki officiel de SandCraft - Tous les mods, guides et ressources pour votre serveur modd√©">
    <meta name="keywords" content="minecraft, mods, sandcraft, wiki, create, automation, magic">
    <meta name="author" content="Matheodelaille">
    
    <style>
        /* Styles d'initialisation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #00dbde;
            font-size: 1.5rem;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 219, 222, 0.3);
            border-top: 4px solid #00dbde;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- √âcran de chargement -->
    <div id="loadingScreen" class="loading">
        <div class="loading-spinner"></div>
        <span>Chargement du Wiki SandCraft...</span>
    </div>
    
    <!-- Contenu principal (cach√© pendant le chargement) -->
    <div id="mainContent" style="display: none;">
        <!-- Container principal -->
        <div class="container">
            
            <!-- Header -->
            <header class="site-header">
                <div class="header-content">
                    <h1 class="site-title">
                        <i class="fas fa-cube"></i> SandCraft Wiki
                    </h1>
                    <p class="site-subtitle">
                        Le Wiki officiel de mon serveur modd√© SandCraft pour tous les mods du modpack !
                    </p>
                    
                    <!-- Navigation -->
                    <nav class="main-nav">
                        <a href="./" class="nav-link active">
                            <i class="fas fa-home"></i> Accueil
                        </a>
                        <a href="./modlist.html" class="nav-link">
                            <i class="fas fa-list"></i> Tous les Mods
                        </a>
                        <a href="./create.html" class="nav-link">
                            <i class="fas fa-plus-circle"></i> Ajouter un Mod
                        </a>
                        <a href="./guides.html" class="nav-link">
                            <i class="fas fa-book"></i> Guides
                        </a>
                        <a href="https://github.com/Matheodelaille/Sandcraft" class="nav-link" target="_blank">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                    </nav>
                </div>
                
                <!-- Statistiques rapides -->
                <div class="header-stats">
                    <div class="stat-item">
                        <i class="fas fa-box"></i>
                        <span class="stat-label">Mods</span>
                        <span class="stat-value" id="totalModsCount">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-layer-group"></i>
                        <span class="stat-label">Cat√©gories</span>
                        <span class="stat-value" id="categoriesCount">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-tags"></i>
                        <span class="stat-label">Tags</span>
                        <span class="stat-value" id="tagsCount">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span class="stat-label">Mise √† jour</span>
                        <span class="stat-value" id="lastUpdate">Aujourd'hui</span>
                    </div>
                </div>
            </header>
            
            <!-- Grille principale -->
            <div class="main-grid">
                
                <!-- Sidebar -->
                <aside class="sidebar">
                    <!-- Recherche -->
                    <div class="sidebar-section">
                        <h3 class="section-title">
                            <i class="fas fa-search"></i> Recherche
                        </h3>
                        <div class="search-box">
                            <input type="text" 
                                   class="search-input" 
                                   id="mainSearchInput"
                                   placeholder="Rechercher un mod...">
                            <button class="btn btn-primary" id="mainSearchButton">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filtres -->
                    <div class="sidebar-section">
                        <h3 class="section-title">
                            <i class="fas fa-filter"></i> Filtres
                        </h3>
                        
                        <div class="filter-group">
                            <label for="categoryFilter">
                                <i class="fas fa-folder"></i> Cat√©gorie
                            </label>
                            <select class="filter-select" id="categoryFilter">
                                <option value="">Toutes les cat√©gories</option>
                                <!-- Rempli dynamiquement -->
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="tagFilter">
                                <i class="fas fa-tag"></i> Tag
                            </label>
                            <select class="filter-select" id="tagFilter">
                                <option value="">Tous les tags</option>
                                <!-- Rempli dynamiquement -->
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="sortFilter">
                                <i class="fas fa-sort"></i> Trier par
                            </label>
                            <select class="filter-select" id="sortFilter">
                                <option value="name">Nom (A-Z)</option>
                                <option value="name_desc">Nom (Z-A)</option>
                                <option value="date">Date (r√©cent)</option>
                                <option value="date_old">Date (ancien)</option>
                                <option value="popularity">Popularit√©</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-secondary btn-block" id="resetFiltersBtn">
                            <i class="fas fa-redo"></i> R√©initialiser les filtres
                        </button>
                    </div>
                    
                    <!-- Actions rapides -->
                    <div class="sidebar-section">
                        <h3 class="section-title">
                            <i class="fas fa-bolt"></i> Actions Rapides
                        </h3>
                        
                        <button class="btn btn-primary btn-block" id="showAllModsBtn">
                            <i class="fas fa-list"></i> Voir tous les mods
                        </button>
                        
                        <button class="btn btn-success btn-block" id="createModBtn">
                            <i class="fas fa-plus"></i> Ajouter un mod
                        </button>
                        
                        <button class="btn btn-info btn-block" id="refreshDataBtn">
                            <i class="fas fa-sync-alt"></i> Actualiser les donn√©es
                        </button>
                    </div>
                    
                    <!-- Aide -->
                    <div class="sidebar-section">
                        <h3 class="section-title">
                            <i class="fas fa-question-circle"></i> Aide
                        </h3>
                        <p class="help-text">
                            Cliquez sur une cat√©gorie pour voir tous ses mods, ou utilisez la recherche pour trouver un mod sp√©cifique.
                        </p>
                        <div class="help-links">
                            <a href="./guides.html" class="help-link">
                                <i class="fas fa-book"></i> Guide d'utilisation
                            </a>
                            <a href="https://github.com/Matheodelaille/Sandcraft/issues" 
                               class="help-link" target="_blank">
                                <i class="fas fa-bug"></i> Signaler un bug
                            </a>
                        </div>
                    </div>
                </aside>
                                <!-- Contenu principal -->
                <main class="main-content">
                    <!-- En-t√™te du contenu -->
                    <div class="content-header">
                        <h1>
                            <i class="fas fa-th-large"></i> 
                            <span id="currentViewTitle">Cat√©gories de Mods</span>
                        </h1>
                        
                        <div class="content-controls">
                            <div class="view-toggle">
                                <button class="view-toggle-btn active" data-view="categories">
                                    <i class="fas fa-th-large"></i> Cat√©gories
                                </button>
                                <button class="view-toggle-btn" data-view="grid">
                                    <i class="fas fa-th"></i> Grille
                                </button>
                                <button class="view-toggle-btn" data-view="list">
                                    <i class="fas fa-list"></i> Liste
                                </button>
                            </div>
                            
                            <div class="results-info">
                                <span id="resultsCount">0</span> mods trouv√©s
                            </div>
                        </div>
                    </div>
                    
                    <!-- Message d'erreur/chargement -->
                    <div id="messageContainer" class="message-container hidden">
                        <div class="message-content">
                            <i class="fas fa-info-circle"></i>
                            <span id="messageText"></span>
                        </div>
                    </div>
                    
                    <!-- Vue Cat√©gories (par d√©faut) -->
                    <div id="categoriesView" class="content-view active">
                        <div class="categories-intro">
                            <p>
                                Explorez les diff√©rentes cat√©gories de mods disponibles sur le serveur SandCraft. 
                                Chaque cat√©gorie regroupe des mods similaires par th√©matique.
                            </p>
                        </div>
                        
                        <!-- Grille des cat√©gories -->
                        <div class="category-grid" id="categoryGrid">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="category-card loading-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <div class="loading-shimmer"></div>
                                    </div>
                                    <h2 class="category-title">
                                        <div class="loading-shimmer" style="width: 150px;"></div>
                                    </h2>
                                </div>
                                <p class="category-description">
                                    <div class="loading-shimmer"></div>
                                    <div class="loading-shimmer" style="width: 80%;"></div>
                                </p>
                                <div class="mod-count">
                                    <div class="loading-shimmer" style="width: 100px;"></div>
                                </div>
                            </div>
                            
                            <!-- R√©p√©t√© pour l'effet de chargement -->
                            <div class="category-card loading-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <div class="loading-shimmer"></div>
                                    </div>
                                    <h2 class="category-title">
                                        <div class="loading-shimmer" style="width: 150px;"></div>
                                    </h2>
                                </div>
                                <p class="category-description">
                                    <div class="loading-shimmer"></div>
                                    <div class="loading-shimmer" style="width: 80%;"></div>
                                </p>
                                <div class="mod-count">
                                    <div class="loading-shimmer" style="width: 100px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Vue Grille (mods) -->
                    <div id="gridView" class="content-view">
                        <div class="mods-grid" id="modsGrid">
                            <!-- Rempli dynamiquement quand on filtre/change de vue -->
                        </div>
                    </div>
                    
                    <!-- Vue Liste (mods) -->
                    <div id="listView" class="content-view">
                        <div class="mods-list-container">
                            <table class="mods-table" id="modsTable">
                                <thead>
                                    <tr>
                                        <th>Nom</th>
                                        <th>Cat√©gorie</th>
                                        <th>Description</th>
                                        <th>Tags</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Rempli dynamiquement -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Pagination (si beaucoup de r√©sultats) -->
                    <div class="pagination-container hidden" id="paginationContainer">
                        <div class="pagination">
                            <button class="pagination-btn" id="prevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i> Pr√©c√©dent
                            </button>
                            
                            <div class="page-numbers" id="pageNumbers">
                                <span class="page-number active">1</span>
                            </div>
                            
                            <button class="pagination-btn" id="nextPageBtn">
                                Suivant <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        
                        <div class="page-info">
                            Page <span id="currentPage">1</span> sur <span id="totalPages">1</span>
                        </div>
                    </div>
                    
                    <!-- Section "Derniers ajouts" -->
                    <div class="recent-mods-section">
                        <h3>
                            <i class="fas fa-history"></i> Derniers mods ajout√©s
                        </h3>
                        <div class="recent-mods-grid" id="recentModsGrid">
                            <!-- Rempli dynamiquement -->
                        </div>
                    </div>
                </main>
            </div> <!-- Fin de .main-grid -->
            
            <!-- Modal de d√©tail du mod -->
            <div id="modDetailModal" class="modal">
                <div class="modal-content" id="modDetailContent">
                    <!-- Rempli dynamiquement -->
                </div>
            </div>
            
            <!-- Modal de cr√©ation de mod -->
            <div id="createModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>
                            <i class="fas fa-plus-circle"></i> Ajouter un nouveau mod
                        </h2>
                        <button class="close-modal-btn" id="closeCreateModal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="modal-body">
                        <p class="modal-intro">
                            Remplissez ce formulaire pour ajouter un nouveau mod au wiki.
                            Tous les champs marqu√©s d'un * sont obligatoires.
                        </p>
                        
                        <form id="createModForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="modName">
                                        <i class="fas fa-heading"></i> Nom du mod *
                                    </label>
                                    <input type="text" 
                                           id="modName" 
                                           name="modName" 
                                           required
                                           placeholder="Ex: Create, Ars Nouveau...">
                                </div>
                                
                                <div class="form-group">
                                    <label for="modCategory">
                                        <i class="fas fa-folder"></i> Cat√©gorie *
                                    </label>
                                    <select id="modCategory" name="modCategory" required>
                                        <option value="">S√©lectionnez une cat√©gorie</option>
                                        <!-- Rempli dynamiquement -->
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="modDescription">
                                    <i class="fas fa-align-left"></i> Description courte *
                                </label>
                                <textarea id="modDescription" 
                                          name="modDescription" 
                                          rows="3"
                                          required
                                          placeholder="D√©crivez bri√®vement le mod..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="modLongDescription">
                                    <i class="fas fa-align-justify"></i> Description d√©taill√©e
                                </label>
                                <textarea id="modLongDescription" 
                                          name="modLongDescription" 
                                          rows="5"
                                          placeholder="Description compl√®te, fonctionnalit√©s..."></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="modIcon">
                                        <i class="fas fa-icons"></i> Ic√¥ne
                                    </label>
                                    <input type="text" 
                                           id="modIcon" 
                                           name="modIcon"
                                           placeholder="Ex: ‚öôÔ∏è, üîÆ, üå±...">
                                    <small class="form-help">
                                        Utilisez un emoji comme ic√¥ne
                                    </small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="modAuthor">
                                        <i class="fas fa-user"></i> Auteur
                                    </label>
                                    <input type="text" 
                                           id="modAuthor" 
                                           name="modAuthor"
                                           placeholder="Nom de l'auteur du mod">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="modVersion">
                                        <i class="fas fa-code-branch"></i> Version
                                    </label>
                                    <input type="text" 
                                           id="modVersion" 
                                           name="modVersion"
                                           placeholder="Ex: 1.0.0">
                                </div>
                                
                                <div class="form-group">
                                    <label for="modPopularity">
                                        <i class="fas fa-star"></i> Popularit√© (0-100)
                                    </label>
                                    <input type="number" 
                                           id="modPopularity" 
                                           name="modPopularity"
                                           min="0" max="100" value="50">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="modTags">
                                    <i class="fas fa-tags"></i> Tags
                                </label>
                                <input type="text" 
                                       id="modTags" 
                                       name="modTags"
                                       placeholder="m√©canique, automatisation, √©nergie...">
                                <small class="form-help">
                                    S√©parez les tags par des virgules
                                </small>
                            </div>
                            
                            <div class="form-group">
                                <label for="modFeatures">
                                    <i class="fas fa-check-circle"></i> Fonctionnalit√©s
                                </label>
                                <textarea id="modFeatures" 
                                          name="modFeatures" 
                                          rows="3"
                                          placeholder="Listez les principales fonctionnalit√©s, une par ligne..."></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" 
                                        class="btn btn-secondary" 
                                        id="cancelCreateModal">
                                    <i class="fas fa-times"></i> Annuler
                                </button>
                                
                                <button type="submit" 
                                        class="btn btn-success">
                                    <i class="fas fa-save"></i> Ajouter le mod
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
                        <!-- Footer -->
            <footer class="site-footer">
                <div class="footer-content">
                    <div class="footer-section">
                        <h4>
                            <i class="fas fa-cube"></i> SandCraft Wiki
                        </h4>
                        <p class="footer-description">
                            Le Wiki officiel de mon serveur modd√© SandCraft pour tous les mods du modpack !
                        </p>
                        <div class="footer-links">
                            <a href="./" class="footer-link">
                                <i class="fas fa-home"></i> Accueil
                            </a>
                            <a href="./modlist.html" class="footer-link">
                                <i class="fas fa-list"></i> Tous les mods
                            </a>
                            <a href="./create.html" class="footer-link">
                                <i class="fas fa-plus"></i> Ajouter un mod
                            </a>
                            <a href="./guides.html" class="footer-link">
                                <i class="fas fa-book"></i> Guides
                            </a>
                        </div>
                    </div>
                    
                    <div class="footer-section">
                        <h4>
                            <i class="fas fa-database"></i> Donn√©es
                        </h4>
                        <div class="footer-stats">
                            <div class="footer-stat">
                                <i class="fas fa-box"></i>
                                <span id="footerModsCount">0</span> mods
                            </div>
                            <div class="footer-stat">
                                <i class="fas fa-layer-group"></i>
                                <span id="footerCategoriesCount">0</span> cat√©gories
                            </div>
                            <div class="footer-stat">
                                <i class="fas fa-tags"></i>
                                <span id="footerTagsCount">0</span> tags
                            </div>
                        </div>
                        <div class="footer-actions">
                            <button class="btn btn-small btn-secondary" id="exportDataBtn">
                                <i class="fas fa-download"></i> Exporter
                            </button>
                            <button class="btn btn-small btn-secondary" id="importDataBtn">
                                <i class="fas fa-upload"></i> Importer
                            </button>
                            <button class="btn btn-small btn-danger" id="resetDataBtn">
                                <i class="fas fa-redo"></i> R√©initialiser
                            </button>
                        </div>
                    </div>
                    
                    <div class="footer-section">
                        <h4>
                            <i class="fas fa-info-circle"></i> Informations
                        </h4>
                        <p class="footer-info">
                            <i class="fas fa-user"></i> 
                            <strong>Cr√©ateur :</strong> Matheodelaille
                        </p>
                        <p class="footer-info">
                            <i class="fas fa-code"></i> 
                            <strong>Version :</strong> 2.0.0
                        </p>
                        <p class="footer-info">
                            <i class="fas fa-calendar-alt"></i> 
                            <strong>Derni√®re mise √† jour :</strong>
                            <span id="footerLastUpdate">Aujourd'hui</span>
                        </p>
                        <div class="footer-social">
                            <a href="https://github.com/Matheodelaille/Sandcraft" 
                               class="social-link" 
                               target="_blank"
                               title="GitHub">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="#" class="social-link" title="Discord">
                                <i class="fab fa-discord"></i>
                            </a>
                            <a href="#" class="social-link" title="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p class="copyright">
                        &copy; 2024 SandCraft Wiki. Tous droits r√©serv√©s.
                        <span class="footer-note">
                            Non affili√© √† Mojang ou Microsoft.
                        </span>
                    </p>
                    <div class="footer-technical">
                        <span class="tech-info">
                            <i class="fas fa-code"></i> 
                            Construit avec HTML, CSS & JavaScript
                        </span>
                        <span class="tech-info">
                            <i class="fas fa-server"></i> 
                            H√©berg√© sur GitHub Pages
                        </span>
                    </div>
                </div>
            </footer>
        </div> <!-- Fin de .container -->
    </div> <!-- Fin de #mainContent -->
    
    <!-- Scripts JavaScript -->
    <script src="./assets/js/database.js"></script>
    <script src="./assets/js/search.js"></script>
    
    <!-- Script d'initialisation -->
    <script>
        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ D√©marrage de SandCraft Wiki...');
            
            // Cacher l'√©cran de chargement apr√®s un d√©lai
            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                const mainContent = document.getElementById('mainContent');
                
                if (loadingScreen && mainContent) {
                    loadingScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    
                    // Animation d'apparition
                    mainContent.style.opacity = '0';
                    mainContent.style.transition = 'opacity 0.5s ease';
                    
                    setTimeout(() => {
                        mainContent.style.opacity = '1';
                    }, 50);
                    
                    console.log('‚úÖ Interface charg√©e');
                }
            }, 500);
            
            // Attendre que la base de donn√©es soit pr√™te
            document.addEventListener('sandcraftdb:ready', function(event) {
                console.log('üéØ Base de donn√©es pr√™te, initialisation de l\'interface...');
                initializeInterface();
            });
            
            // Fallback: initialiser apr√®s 2 secondes
            setTimeout(function() {
                if (typeof window.SandCraftDB !== 'undefined') {
                    console.log('‚è±Ô∏è Initialisation par timeout...');
                    initializeInterface();
                }
            }, 2000);
            
            // Initialiser l'interface
            function initializeInterface() {
                try {
                    // Initialiser le syst√®me de recherche
                    if (window.SandCraftSearch && typeof window.SandCraftSearch.initApp === 'function') {
                        window.SandCraftSearch.initApp();
                    } else if (window.initSandCraftWiki) {
                        window.initSandCraftWiki();
                    } else {
                        console.warn('‚ö†Ô∏è Syst√®me de recherche non trouv√©, initialisation manuelle...');
                        manualInitialization();
                    }
                    
                    // Configurer les boutons de navigation
                    setupNavigation();
                    
                    // Configurer les modals
                    setupModals();
                    
                    console.log('‚úÖ Interface initialis√©e avec succ√®s');
                    
                } catch (error) {
                    console.error('‚ùå Erreur lors de l\'initialisation:', error);
                    showErrorMessage('Erreur lors du chargement de l\'application');
                }
            }
            
            // Initialisation manuelle fallback
            function manualInitialization() {
                // Remplir les cat√©gories et tags
                updateCategoryFilter();
                updateTagFilter();
                
                // Afficher les cat√©gories
                displayCategoriesManual();
                
                // Configurer les √©v√©nements
                setupEventListeners();
                
                // Mettre √† jour les stats
                updateStatsManual();
            }
            
            // Remplir le filtre des cat√©gories
            function updateCategoryFilter() {
                const categoryFilter = document.getElementById('categoryFilter');
                if (!categoryFilter) return;
                
                if (window.SandCraftDB && window.SandCraftDB.getAllCategories) {
                    const categories = window.SandCraftDB.getAllCategories();
                    categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category.id;
                        option.textContent = category.name;
                        categoryFilter.appendChild(option);
                    });
                }
            }
            
            // Remplir le filtre des tags
            function updateTagFilter() {
                const tagFilter = document.getElementById('tagFilter');
                if (!tagFilter) return;
                
                if (window.SandCraftDB && window.SandCraftDB.getAllTags) {
                    const tags = window.SandCraftDB.getAllTags();
                    tags.forEach(tag => {
                        const option = document.createElement('option');
                        option.value = tag.id;
                        option.textContent = tag.name;
                        tagFilter.appendChild(option);
                    });
                }
            }
            
            // Afficher les cat√©gories manuellement
            function displayCategoriesManual() {
                // √Ä impl√©menter si n√©cessaire
            }
            
            // Configurer les √©v√©nements
            function setupEventListeners() {
                // Recherche
                const searchInput = document.getElementById('mainSearchInput');
                const searchButton = document.getElementById('mainSearchButton');
                
                if (searchInput && searchButton) {
                    searchButton.addEventListener('click', function() {
                        performSearch();
                    });
                    
                    searchInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            performSearch();
                        }
                    });
                }
                
                // Filtres
                const categoryFilter = document.getElementById('categoryFilter');
                const tagFilter = document.getElementById('tagFilter');
                const sortFilter = document.getElementById('sortFilter');
                
                if (categoryFilter) {
                    categoryFilter.addEventListener('change', performSearch);
                }
                
                if (tagFilter) {
                    tagFilter.addEventListener('change', performSearch);
                }
                
                if (sortFilter) {
                    sortFilter.addEventListener('change', performSearch);
                }
                
                // R√©initialisation
                const resetBtn = document.getElementById('resetFiltersBtn');
                if (resetBtn) {
                    resetBtn.addEventListener('click', function() {
                        if (categoryFilter) categoryFilter.value = '';
                        if (tagFilter) tagFilter.value = '';
                        if (searchInput) searchInput.value = '';
                        if (sortFilter) sortFilter.value = 'name';
                        performSearch();
                    });
                }
                
                // Voir tous les mods
                const showAllBtn = document.getElementById('showAllModsBtn');
                if (showAllBtn) {
                    showAllBtn.addEventListener('click', function() {
                        window.location.href = './modlist.html';
                    });
                }
                
                // Cr√©er un mod
                const createBtn = document.getElementById('createModBtn');
                if (createBtn) {
                    createBtn.addEventListener('click', function() {
                        window.location.href = './create.html';
                    });
                }
            }
            
            // Effectuer une recherche
            function performSearch() {
                // √Ä impl√©menter
                console.log('Recherche effectu√©e');
            }
            
            // Mettre √† jour les stats manuellement
            function updateStatsManual() {
                if (window.SandCraftDB && window.SandCraftDB.getStats) {
                    const stats = window.SandCraftDB.getStats();
                    
                    // Mettre √† jour les compteurs
                    const modsCountElements = document.querySelectorAll('#totalModsCount, #footerModsCount');
                    modsCountElements.forEach(el => {
                        el.textContent = stats.totalMods || 0;
                    });
                    
                    const categoriesCountElements = document.querySelectorAll('#categoriesCount, #footerCategoriesCount');
                    categoriesCountElements.forEach(el => {
                        el.textContent = stats.totalCategories || 0;
                    });
                    
                    const tagsCountElement = document.getElementById('footerTagsCount');
                    if (tagsCountElement) {
                        tagsCountElement.textContent = stats.totalTags || 0;
                    }
                    
                    const lastUpdateElements = document.querySelectorAll('#lastUpdate, #footerLastUpdate');
                    lastUpdateElements.forEach(el => {
                        if (stats.lastUpdate) {
                            const date = new Date(stats.lastUpdate);
                            el.textContent = date.toLocaleDateString('fr-FR');
                        }
                    });
                }
            }
            
            // Configurer la navigation
            function setupNavigation() {
                // Navigation principale
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        if (this.getAttribute('href') === '#') {
                            e.preventDefault();
                        }
                    });
                });
                
                // Boutons d'export/import
                const exportBtn = document.getElementById('exportDataBtn');
                const importBtn = document.getElementById('importDataBtn');
                const resetBtn = document.getElementById('resetDataBtn');
                
                if (exportBtn && window.SandCraftDB && window.SandCraftDB.exportData) {
                    exportBtn.addEventListener('click', function() {
                        window.SandCraftDB.exportData();
                    });
                }
                
                if (importBtn) {
                    importBtn.addEventListener('click', function() {
                        const input = document.createElement('input');
                        input.type = 'file';
                        input.accept = '.json';
                        input.addEventListener('change', function(e) {
                            if (e.target.files[0] && window.SandCraftDB && window.SandCraftDB.importData) {
                                window.SandCraftDB.importData(e.target.files[0])
                                    .then(result => {
                                        alert(result.message || 'Import r√©ussi');
                                        location.reload();
                                    })
                                    .catch(error => {
                                        alert('Erreur lors de l\'import: ' + error.message);
                                    });
                            }
                        });
                        input.click();
                    });
                }
                
                if (resetBtn && window.SandCraftDB && window.SandCraftDB.resetData) {
                    resetBtn.addEventListener('click', function() {
                        if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser toutes les donn√©es ?')) {
                            window.SandCraftDB.resetData()
                                .then(() => {
                                    alert('Donn√©es r√©initialis√©es avec succ√®s');
                                    location.reload();
                                })
                                .catch(error => {
                                    alert('Erreur lors de la r√©initialisation: ' + error.message);
                                });
                        }
                    });
                }
            }
            
            // Configurer les modals
            function setupModals() {
                // Modal de cr√©ation
                const createModal = document.getElementById('createModal');
                const closeCreateBtn = document.getElementById('closeCreateModal');
                const cancelCreateBtn = document.getElementById('cancelCreateModal');
                const createForm = document.getElementById('createModForm');
                
                if (closeCreateBtn && createModal) {
                    closeCreateBtn.addEventListener('click', function() {
                        createModal.style.display = 'none';
                    });
                }
                
                if (cancelCreateBtn && createModal) {
                    cancelCreateBtn.addEventListener('click', function() {
                        createModal.style.display = 'none';
                        if (createForm) createForm.reset();
                    });
                }
                
                // Fermer en cliquant √† l'ext√©rieur
                window.addEventListener('click', function(e) {
                    const modals = document.querySelectorAll('.modal');
                    modals.forEach(modal => {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                            if (createForm) createForm.reset();
                        }
                    });
                });
            }
            
            // Afficher un message d'erreur
            function showErrorMessage(message) {
                const messageContainer = document.getElementById('messageContainer');
                const messageText = document.getElementById('messageText');
                
                if (messageContainer && messageText) {
                    messageText.textContent = message;
                    messageContainer.className = 'message-container error';
                    messageContainer.classList.remove('hidden');
                    
                    // Cacher apr√®s 5 secondes
                    setTimeout(() => {
                        messageContainer.classList.add('hidden');
                    }, 5000);
                } else {
                    alert(message);
                }
            }
        });
        
        // Gestion des vues (cat√©gories/grille/liste)
        document.addEventListener('click', function(e) {
            if (e.target.closest('.view-toggle-btn')) {
                const button = e.target.closest('.view-toggle-btn');
                const view = button.dataset.view;
                
                // Mettre √† jour les boutons actifs
                document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                // Afficher la vue correspondante
                document.querySelectorAll('.content-view').forEach(viewEl => {
                    viewEl.classList.remove('active');
                });
                
                const targetView = document.getElementById(view + 'View');
                if (targetView) {
                    targetView.classList.add('active');
                    
                    // Mettre √† jour le titre
                    const titleMap = {
                        'categories': 'Cat√©gories de Mods',
                        'grid': 'Mods en Grille',
                        'list': 'Mods en Liste'
                    };
                    
                    const titleElement = document.getElementById('currentViewTitle');
                    if (titleElement) {
                        titleElement.textContent = titleMap[view] || 'Mods';
                    }
                }
            }
        });
        
        // Fonction utilitaire pour formater les nombres
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }
        
        console.log('‚úÖ Scripts charg√©s avec succ√®s');
    </script>
</body>
</html>
